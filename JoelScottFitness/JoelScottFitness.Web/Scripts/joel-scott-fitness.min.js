function OffsetMenu() { $(".menu").offset().top, $(window); $("#nav").removeClass("sticky"), $("#nav-back-mask").removeClass("nav-back-mask-padded"), $(window).scrollTop() >= $(".menu").offset().top && ($("#nav").addClass("sticky"), $("#nav-back-mask").addClass("nav-back-mask-padded")) } function sendEmail() { $.ajax({ type: "GET", url: "/Admin/SendEmail", success: function (e) { } }) } function getBlog(e) { $.ajax({ type: "GET", url: "/Home/Blog/" + e, success: function (e) { $("#blog-title").text(e.title), $("#blog-sub-title").text(e.subTitle), $("#blog-date").text(e.date), $("#blog-content").text(e.content); var a = "", t = "", n = "active item-active"; if ($("#blog-modal-carousel-wrapper").empty(), void 0 !== e.images && $.each(e.images, function (e, i) { 0 === e ? a = "<li data-target='#blog-modal-carousel' data-slide-to='" + e + "' class='active'></li>\n" : (a = a + "<li data-target='#blog-modal-carousel' data-slide-to='" + e + "'></li>\n", n = ""), t = t + "<div class='item " + n + " blog-modal-carousel-item'><img src='" + i.ImagePath + "' class='blog-modal-carousel-item-image' /><div class='carousel-caption blog-modal-carousel-item-caption'>", null !== i.Caption && null !== i.CaptionTitle && (t = t + "<h3 class='hide-caption'>" + i.CaptionTitle + "</h3><p class='hide-caption'>" + i.Caption + "</p>"); var o = "blog-modal-carousel-item-caption-logo-black"; 1 == i.CaptionColour && (o = "blog-modal-carousel-item-caption-logo-white"), t = t + "<div class='logo blog-modal-carousel-item-caption-logo " + o + "'></div>", t += "</div></div>" }), "" !== a && "" !== t) { var i = "<div id='blog-modal-carousel' class='carousel slide blog-modal-carousel-wrapper' data-ride='carousel'>" + (a = "<ol id='carousel-indicators' class='carousel-indicators'>" + a + "</ol>") + (t = "<div id='carousel-inner' class='carousel-inner'>" + t + "</div>") + "<a class='left carousel-control' href='#blog-modal-carousel' data-slide='prev'> <span class='glyphicon glyphicon-chevron-left'></span><span class='sr-only'>Previous</span></a><a class='right carousel-control' href='#blog-modal-carousel' data-slide='next'><span class='glyphicon glyphicon-chevron-right'></span><span class='sr-only'>Next</span></a></div>"; $("#blog-modal-carousel-wrapper").append(i) } return $("#blog-modal").modal(), triggerCarousel(), !1 } }) } function triggerCarousel() { null !== document.querySelector(".carousel") && ($(".carousel").carousel({ interval: 3e3 }), $(".carousel").carousel("cycle")) } function showUploadModal(e) { $("#order-id").val(e), $("#upload-title").text("Upload Before and After"), $("#upload-sub-title").text("Show the world your transformation!"), $("#upload-modal").modal() } function addToBasket(e) { return $.ajax({ type: "POST", cache: !1, url: "/Home/AddToBasket", data: { id: $("#" + e + " option:selected").val(), __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val() }, success: function (e) { getBasketItems() } }), !1 } function removeFromBasket(e, a) { return $.ajax({ type: "POST", cache: !1, url: "/Home/RemoveFromBasket", data: { id: e, __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val() }, success: function (e) { $("." + a).remove(), getBasketItems(), calculateBasketItemTotals() } }), !1 } function getBasketItems() { $.ajax({ type: "GET", cache: !1, url: "/Home/GetBasketItemCount", success: function (e) { e.items > 0 ? ($("#basket-badge").text(e.items), $("#basket-cart-container").is(":visible") || $("#basket-cart-container").animate({ width: "toggle" }, "slow")) : e.items <= 0 && $("#basket-cart-container").is(":visible") && $("#basket-cart-container").animate({ width: "toggle" }, "slow") } }) } function increaseQuantity(e, a) { return changeQuantity(e, a, "IncreaseQuantity") } function decreaseQuantity(e, a) { return changeQuantity(e, a, "DecreaseQuantity") } function changeQuantity(e, a, t) { return $.ajax({ type: "POST", cache: !1, url: "/Home/" + t, data: { id: e, __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val() }, success: function (e) { $("." + a).val(e.Quantity), calculateBasketItemTotals() } }), !1 } function applyDiscountCode(e) { $(".basket-discount-input").attr("placeholder", "Discount Code"); var a = $("." + e).val(); return "" != a && null != a ? $.ajax({ type: "POST", cache: !1, url: "/Home/ApplyDiscountCode", data: { code: a, __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val() }, success: function (e) { 1 == e.applied ? (hideApplyDiscountCode(e.description), $(".discount").val(e.discount), calculateBasketItemTotals()) : ($(".basket-discount-input").val("").attr("placeholder", "Invalid Code!"), $(".discount").val("")) } }) : $(".basket-discount-input").each(function (e, a) { $(a).val("") }), !1 } function calculateBasketItemTotals() { if ($(".basket-wrapper").length > 0 && $(".basket-item").length > 0) { var e = parseInt($(".discount").first().val()); $(".basket-wrapper").each(function (a, t) { var n = 0; $(t).find(".basket-item").each(function (a, t) { var i = $(t).find("#basket-item-price")[0], o = $(t).find("#basket-item-hidden-price")[0], l = $(t).find(".basket-item-quantity")[0], s = parseFloat($(o).val()) * parseInt($(l).val()); isNaN(e) || (s = parseFloat(s) - parseFloat(s) / 100 * parseInt(e)), Math.round(s) !== s && (s = s.toFixed(2)), $(i).val("£" + s), n = parseFloat(n) + parseFloat(s) }), Math.round(n) !== n && (n = n.toFixed(2)), $(t).find(".basket-total-row").each(function (e, a) { var t = $(a).find("#basket-total")[0]; $(t).val("£" + n) }) }) } else $(".basket-wrapper").hide(), $(".basket-summary").hide(), $(".active-basket-button-wrapper").hide(), $("#no-items").show() } function removeDiscountFromItems() { $(".basket-wrapper").each(function (e, a) { var t = 0; $(a).find(".basket-item").each(function (e, a) { var n = $(a).find("#basket-item-price")[0], i = $(a).find("#basket-item-hidden-price")[0], o = $(a).find(".basket-item-quantity")[0], l = parseFloat($(i).val()) * parseInt($(o).val()); Math.round(l) !== l && (l = l.toFixed(2)), t = parseFloat(t) + parseFloat(l), $(n).val("£" + parseFloat(l)) }), $(a).find(".basket-total-row").each(function (e, a) { var n = $(a).find("#basket-total")[0]; $(n).val("£" + t) }) }) } function removeDiscountCode() { return $(".discount").val(""), $.ajax({ type: "POST", cache: !1, url: "/Home/RemoveDiscountCode", data: { __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val() }, success: function (e) { calculateBasketItemTotals(), showApplyDiscountCode() } }), !1 } function showApplyDiscountCode() { $(".basket-discount-input").each(function (e, a) { $(a).val("") }), $(".apply-discount-code-wrapper").each(function (e, a) { $(a).removeClass("basket-hide-element") }), $(".remove-discount-code-wrapper").each(function (e, a) { $(a).addClass("basket-hide-element") }) } function hideApplyDiscountCode(e) { $(".basket-discount-description").each(function (a, t) { $(t).val(e) }), $(".remove-discount-code-wrapper").each(function (e, a) { $(a).removeClass("basket-hide-element") }), $(".apply-discount-code-wrapper").each(function (e, a) { $(a).addClass("basket-hide-element") }) } function addPlanOption(e) { var a = $("#add-description").val(), t = $("#add-duration").val(), n = $("#add-price").val(), i = parseInt($("#plan-option-count").val()), o = "<tr><input class='basket-value' id='Options[" + i + "].ItemType' name='Options[" + i + "].ItemType' type='hidden' value='Plan' > <input class='basket-value' id='Options[" + i + "].PlanId' name='Options[" + i + "].PlanId' type='hidden' value='" + e + "' > <td><input id='Options[" + i + "].Description' name='Options[" + i + "].Description' type='text' value='" + a + "' > </td><td><input id='Options[" + i + "].Duration' name='Options[" + i + "].Duration' type='text' value='" + t + "' > </td><td><input id='Options[" + i + "].Price' name='Options[" + i + "].Price' type='text' value='" + n + "' > </td></tr>"; $("table tbody").append(o), $("#add-description").val(""), $("#add-duration").val(""), $("#add-price").val(""), $("#plan-option-count").val(i + 1) } function addBlogImage(e) { var a = $("#add-file").val(), t = ($("#add-image-path").val(), $("#add-caption-title").val()), n = $("#add-caption").val(), i = $("#add-logo-colour").val(), o = parseInt($("#blog-image-count").val()); void 0 === a && (a = ""); var l = "<tr><input class='basket-value' id='BlogImages[" + o + "].BlogId' name='BlogImages[" + o + "].BlogId' type='hidden' value='" + e + "' > <td><input class='basket-value' id='BlogImages[" + o + "].PostedFile' name='BlogImages[" + o + "].PostedFile' type='file' value='" + a + "' > </td>"; e > 0 && (l = l + "<td><input id='BlogImages[" + o + "].ImagePath' name='BlogImages[" + o + "].ImagePath' type='text' value='' readonly='readonly'> </td>"), l = l + "<td><input id='BlogImages[" + o + "].CaptionTitle' name='BlogImages[" + o + "].CaptionTitle' type='text' value='" + t + "' > </td><td><input id='BlogImages[" + o + "].Caption' name='BlogImages[" + o + "].Caption' type='text' value='" + n + "' > </td><td><select id='BlogImages[" + o + "].CaptionColour' name='BlogImages[" + o + "].CaptionColour' data-val='true' data-val-required='The Logo Colour field is required.' style='width:100%'><option selectedBlack value='Black'>Black</option><option selectedWhite value='White'>White</option></select>", l = "Black" === i ? (l = l.replace("selectedBlack", "selected='selected'")).replace("selectedWhite", "") : (l = l.replace("selectedWhite", "selected='selected'")).replace("selectedBlack", ""), $("table tbody").append(l), $("#add-file").val(""), $("#add-image-path").val(""), $("#add-caption-title").val(""), $("#add-caption").val(""), $("#add-logo-colour").val("Black"), $("#blog-image-count").val(o + 1) } function checkFileType(e) { var a = e.toLowerCase().substring(e.lastIndexOf(".") + 1); return !($.inArray(a, ["gif", "png", "jpg", "jpeg"]) < 0) } $(window).scroll(function () { return OffsetMenu(), !0 }), $(window).resize(function () { return OffsetMenu(), !0 }), $(function () { return OffsetMenu(), !0 }), $(function () { "/" !== window.location.pathname || 0 === window.location.pathname.toLowerCase().indexOf("index") ? $("#full-page-image").hide() : $("#full-page-image").show() }), $(function () { $("#subscribe").click(function () { $.ajax({ type: "POST", cache: !1, url: "/Home/SubscribeToMailingList", data: { emailAddress: $("#emailAddress").val(), __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val() }, success: function (e) { $("#emailAddress").val(""), $("#emailAddress").attr("placeholder", "Thanks!") } }) }) }), $(function () { getBasketItems() }), $(function () { $(".datepicker").datepicker({ dateFormat: "dd/mm/yy" }) }), $(function () { $(".plans-link").click(function () { $(".navbar-toggle:visible").click() }) }), $(function () { var e = document.getElementById("upload-form"), a = document.getElementById("upload-button"), t = document.getElementById("before-image"), n = document.getElementById("after-image"), i = document.getElementById("validation-summary"); e.onsubmit = function (e) { if (e.preventDefault(), i.innerHTML = "", i.hidden = !0, a.innerHTML = 'Uploading...<i class="fa fa-spinner fa-pulse" aria-hidden="true"></i>', t.files.length <= 0 || n.files.length <= 0) return i.innerHTML = "Please select image files.", i.hidden = !1, void (a.innerHTML = "Submit"); if ($("#comment").val().trim(" ").length <= 0) return i.innerHTML = "Please enter a comment.", i.hidden = !1, void (a.innerHTML = "Submit"); var o = t.files[0], l = n.files[0], s = new FormData; if (s.append("BeforeFile", o, o.name), s.append("AfterFile", l, l.name), s.append("Comment", $("#comment").val().trim(" ")), s.append("OrderId", $("#order-id").val()), s.append("__RequestVerificationToken", $('input[name="__RequestVerificationToken"]').val()), !checkFileType(o.name) || !checkFileType(l.name)) return i.innerHTML = "Files must be images.", i.hidden = !1, void (a.innerHTML = "Submit"); var d = new XMLHttpRequest; d.open("POST", "/Home/BeforeAndAfter", !0), d.onload = function () { if (200 === d.status) { a.innerHTML = "Submit"; var e = JSON.parse(d.response); !1 === e.success ? (i.innerHTML = e.errorMessage, i.hidden = !1) : ($("#upload-modal").modal("hide"), $("#comment").val(""), $("#order-id").val(""), $("#before-image").val(""), $("#after-image").val("")) } else i.innerHTML = "Oops! something went wrong please try again later.", i.hidden = !1, a.innerHTML = "Submit" }, d.send(s) } });